<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- =========================
       SEO CORE
  ========================== -->
  <title>NZS TS1170.5 Site Parameter Finder (TS 1170.5)</title>
  <meta name="description" content="Free NZS 1170 seismic site parameters tool. Search an NZ address or click the map to apply TS 1170.5 site class, importance level, and design working life inputs and view matched seismic parameters." />
  <link rel="canonical" href="https://YOUR-DOMAIN-HERE/ts1170-5-site-parameter-finder" />
  <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />
  <meta name="theme-color" content="#ffffff" />

  <!-- Open Graph -->
  <meta property="og:title" content="NZS 1170.5 Site Parameter Finder (TS 1170.5) | NZ Seismic Tool" />
  <meta property="og:description" content="Search an NZ address or click the map to apply TS 1170.5 site class, importance level, and design working life inputs and view matched seismic parameters." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://YOUR-DOMAIN-HERE/ts1170-5-site-parameter-finder" />
  <!-- If you have a social preview image, add it here -->
  <!-- <meta property="og:image" content="https://YOUR-DOMAIN-HERE/og-image.png" /> -->

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="NZS 1170.5 Site Parameter Finder (TS 1170.5) | NZ Seismic Tool" />
  <meta name="twitter:description" content="Free NZS 1170 seismic site parameters tool for New Zealand engineers. Apply site class, importance level and working life with TS 1170.5." />

  <!-- =========================
       SCHEMA (JSON-LD)
       - SoftwareApplication + FAQ
  ========================== -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "NZS 1170.5 Site Parameter Finder (TS 1170.5)",
    "applicationCategory": "EngineeringApplication",
    "operatingSystem": "Web",
    "isAccessibleForFree": true,
    "description": "A web tool for New Zealand structural engineers to help apply NZS 1170 seismic loading by using TS 1170.5 site class, importance level and design working life inputs to view matched seismic parameters.",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "NZD" }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What does this NZS 1170.5 site parameter finder do?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "It helps apply NZS 1170 seismic design inputs in practice by allowing you to choose a New Zealand location and set site class, importance level and design working life to view matched TS 1170.5-related parameters."
        }
      },
      {
        "@type": "Question",
        "name": "Is this the official NZS 1170 / TS 1170.5 standard?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No. This is an independent tool intended to assist engineering workflows. You must refer to the official standards and apply professional judgement."
        }
      },
      {
        "@type": "Question",
        "name": "Does the tool collect precise location data?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No. The site may collect approximate location data such as country/region/city derived from IP address for analytics and improvement. It does not collect precise device GPS location unless you choose 'Use my location'."
        }
      }
    ]
  }
  </script>

  <style>
    *, *::before, *::after { box-sizing: border-box; }
    body { font-family: Arial, sans-serif; margin: 20px; color:#111; }
    a { color: inherit; }
    #pageTitle { text-align: center; margin: 0 0 8px 0; }
    #pageSubTitle { text-align:center; margin: 0 0 16px 0; color:#555; font-weight:600; }

    .content-wrap{
      width: 100%;
      max-width: 1400px;
      margin: 0 auto;
    }

    /* SEO intro (indexable copy) */
    .seo-intro{
      margin: 0 auto 14px auto;
      max-width: 1100px;
      line-height: 1.4;
      color: #222;
      font-size: 14px;
    }
    .seo-intro strong{ font-weight:800; }
    .seo-badges{
      display:flex; flex-wrap:wrap; gap:8px;
      justify-content:center;
      margin: 10px 0 6px 0;
    }
    .badge{
      font-size: 12px;
      padding: 6px 10px;
      border: 1px solid #ddd;
      border-radius: 999px;
      background:#fafafa;
      color:#444;
      font-weight:700;
    }

    /* Search row */
    .search-wrap { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px; width:100%; }
    #addressInput { flex: 1 1 520px; width:100%; padding:10px; border:1px solid #ccc; border-radius:6px; }
    #useMyLocationBtn { padding:10px; border:1px solid #aaa; border-radius:6px; background:#fff; cursor:pointer; }

    #coords { font-weight:bold; margin-bottom:12px; }

    /* Two-column */
    .main-grid { display:flex; gap:16px; align-items:stretch; width:100%; }
    .left-panel { flex: 0 0 520px; max-width: 520px; width:100%; }
    .right-panel { flex: 1 1 auto; min-width: 320px; display:flex; }

    @media (max-width: 980px){
      .main-grid { flex-direction: column; }
      .left-panel { max-width: 100%; flex-basis: auto; }
      .right-panel { width: 100%; }
    }

    .option-block{
      padding:15px;
      border:1px solid #ddd;
      border-radius:6px;
      background:#fafafa;
      width:100%;
    }
    .row { margin-bottom: 14px; }
    .row label { font-weight:bold; display:block; margin-bottom:6px; }

    .option-buttons button{
      padding:8px 12px;
      margin:4px;
      border:1px solid #aaa;
      border-radius:4px;
      background:#fff;
      cursor:pointer;
      transition: background .15s, color .15s, border-color .15s;
    }
    .option-buttons button.selected{
      background:#007bff;
      color:#fff;
      border-color:#007bff;
    }

    #map{
      width:100%;
      min-height:280px;
      border:1px solid #ccc;
      border-radius:6px;
      flex: 1 1 auto;
    }

    /* Results */
    .results-wrap{
      width: 100%;
      margin-top: 16px;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fff;
      position: relative;
    }

    #roundedCoordsBar{
      display:none;
      font-weight:700;
      color:#666;
      margin-bottom: 10px;
    }

    #tablesGrid{
      display: grid;
      gap: 12px;
      width: 100%;
    }

    .table-card{
      width:100%;
      overflow-x:auto;
      border: 1px solid #eee;
      border-radius: 8px;
      padding: 8px;
      background: #fff;
    }

    .sc-table { width: 100%; border-collapse: collapse; background: #fff; font-size: 14px; }
    .sc-table th, .sc-table td { border: 2px solid #000; padding: 8px; text-align: center; vertical-align: middle; white-space: nowrap; }
    .sc-table thead th { font-weight: 700; }
    .sc-table .left-head { width: 220px; text-align:left; }
    .sc-table .left-cell { text-align:left; font-weight:700; }
    .sc-table .subhead { font-weight: 700; }

    .loading-overlay{
      position:absolute;
      inset:0;
      background: rgba(255,255,255,0.85);
      display:none;
      align-items:center;
      justify-content:center;
      border-radius:8px;
      z-index: 2;
      font-weight: 700;
    }
    .loading-overlay.show{ display:flex; }

    /* Special-case message card (inside tables area) */
    .special-case-card{
      border: 1px solid #eee;
      border-radius: 8px;
      padding: 14px;
      background: #fafafa;
      font-weight: 800;
      text-align: center;
    }

    .coming-soon-box{
      margin-top: 14px;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #f5f5f5;
      color: #666;
      font-weight: 700;
      text-align: center;
      opacity: 0.8;
    }

    /* SEO content block */
    .seo-block{
      margin-top: 18px;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 14px;
      background: #fafafa;
      line-height: 1.45;
      color:#222;
      font-size: 14px;
    }
    .seo-block h2{ margin: 0 0 8px 0; font-size: 16px; }
    .seo-block h3{ margin: 14px 0 6px 0; font-size: 14px; }
    .seo-block ul{ margin: 8px 0 0 18px; }
    .fineprint{ color:#555; font-size: 13px; margin-top: 10px; }

    /* Suggestions (collapsible) */
    details.suggestions-details{
      margin-top: 18px;
      width: 100%;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fafafa;
      padding: 0;
      overflow: hidden;
    }
    details.suggestions-details > summary{
      list-style: none;
      cursor: pointer;
      padding: 14px;
      font-weight: 700;
      user-select: none;
      display:flex;
      align-items:center;
      justify-content: space-between;
    }
    details.suggestions-details > summary::-webkit-details-marker { display:none; }
    .suggestions-body{
      padding: 14px;
      border-top: 1px solid #ddd;
    }
    #suggestionText{
      width: 100%;
      min-height: 110px;
      resize: vertical;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-family: inherit;
      font-size: 14px;
    }
    #submitSuggestionBtn{
      display: inline-block;
      margin-top: 10px;
      padding: 10px 14px;
      border: 1px solid #aaa;
      border-radius: 6px;
      background: #fff;
      cursor: pointer;
    }
    #suggestionMsg{ margin-top: 8px; color:#666; }

    /* Page view counter */
    .pageviews{
      margin-top: 14px;
      text-align: center;
      color:#666;
      font-weight: 700;
      font-size: 13px;
    }

    /* Consent modal (blocks site until accepted) */
    .modal-backdrop{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 18px;
    }
    .modal-backdrop.show{ display:flex; }

    .modal{
      width: min(820px, 100%);
      background: #fff;
      border-radius: 12px;
      border: 1px solid #ddd;
      box-shadow: 0 20px 60px rgba(0,0,0,0.25);
      overflow: hidden;
      position: relative;
    }
    .modal-header{
      padding: 14px 16px;
      border-bottom: 1px solid #eee;
      font-weight: 800;
      display:flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }
    .modal-title{ font-size: 16px; }
    .modal-body{
      padding: 16px;
      max-height: min(60vh, 520px);
      overflow: auto;
      white-space: pre-line;
      line-height: 1.35;
      font-size: 14px;
    }
    .modal-footer{
      padding: 14px 16px;
      border-top: 1px solid #eee;
      display:flex;
      gap: 10px;
      justify-content: flex-end;
      flex-wrap: wrap;
    }
    .btn{
      padding: 10px 14px;
      border: 1px solid #aaa;
      border-radius: 8px;
      background: #fff;
      cursor: pointer;
      font-weight: 700;
    }
    .btn.primary{
      background: #007bff;
      border-color: #007bff;
      color: #fff;
    }
    .btn.danger{
      border-color: #c00;
      color: #c00;
    }

    /* Learn more modal close (top right) */
    .close-x{
      width: 34px;
      height: 34px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fff;
      cursor: pointer;
      font-weight: 900;
      line-height: 1;
      flex: 0 0 auto;
    }

    /* Block interaction with site until consent */
    body.consent-locked .content-wrap{
      pointer-events: none;
      user-select: none;
      filter: blur(0px);
    }
  </style>
</head>

<body class="consent-locked">
  <!-- H1 is the SEO headline -->
  <h1 id="pageTitle">NZS 1170.5 Site Parameter Finder (TS 1170.5)</h1>
  <div id="pageSubTitle">New Zealand seismic site class & parameters tool for structural engineers</div>

  <div class="seo-badges" aria-hidden="true">
    <div class="badge">NZS 1170 seismic loading</div>
    <div class="badge">TS 1170.5 site class</div>
    <div class="badge">Importance level</div>
    <div class="badge">Design working life</div>
    <div class="badge">Map + address lookup</div>
  </div>

  <div class="content-wrap">

    <!-- Indexable intro copy for Google -->
    <div class="seo-intro">
      <p>
        This <strong>NZS 1170.5 site parameter finder</strong> is a free web tool intended to help New Zealand structural engineers
        apply <strong>NZS 1170 seismic</strong> design inputs in practice. Choose a project location (address search or map click),
        then set <strong>site class</strong>, <strong>importance level</strong>, and <strong>design working life</strong> to view matched outputs
        aligned with <strong>TS 1170.5</strong>.
      </p>
    </div>

    <div class="search-wrap">
      <input id="addressInput" placeholder="Search address (NZ only)" aria-label="Search New Zealand address" />
      <button id="useMyLocationBtn" type="button">Use my location</button>
    </div>

    <div id="coords">Choose a location (search or click the map)</div>

    <div class="main-grid">
      <div class="left-panel">
        <div class="option-block" id="designInputsBlock">
          <h2 style="margin:0 0 10px 0;">Design inputs</h2>

          <div class="row">
            <label>Site class (TS 1170.5)</label>
            <div class="option-buttons" id="siteClassOptions">
              <button type="button" data-value="I">I</button>
              <button type="button" data-value="II">II</button>
              <button type="button" data-value="III">III</button>
              <button type="button" data-value="IV">IV</button>
              <button type="button" data-value="V">V</button>
              <button type="button" data-value="VI">VI</button>
            </div>
          </div>

          <div class="row">
            <label>Importance level (NZS 1170)</label>
            <div class="option-buttons" id="importanceLevelOptions">
              <button type="button" data-value="1">1</button>
              <button type="button" data-value="2">2</button>
              <button type="button" data-value="3">3</button>
              <button type="button" data-value="4">4</button>
            </div>
          </div>

          <div class="row" style="margin-bottom:0;">
            <label>Design working life (NZS 1170)</label>
            <div class="option-buttons" id="workingLifeOptions">
              <button type="button" data-value="construction">Construction equipment</button>
              <button type="button" data-value="lt6months">Less than 6 months</button>
              <button type="button" data-value="5">5 years</button>
              <button type="button" data-value="25">25 years</button>
              <button type="button" data-value="50">50 years</button>
              <button type="button" data-value="100">100 years or more</button>
            </div>
          </div>
